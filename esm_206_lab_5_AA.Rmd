---
title: "esm_206_lab_5"
author: "Amy Anderson"
date: "10/28/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Objectives:

- Getting counts for different groups
- Use {lubridate} to parse dates
- Find confidence intervals & do t-tests with t.test()
- Heatmap with geom_tile()


#### Attach packages
```{r, include = FALSE}

library(tidyverse)
library(here)
library(tidyr)
library(janitor)

```


####  read in lobster data
```{r}

lobster_abundance <- read_csv(here::here("data", "lobster_abundance.csv"),
                              na = "-99999") %>% # automatically replaces the na placeholder in this data frame with NA instead
  clean_names() # take variable names out of CAPSLOCK and into snake_case

View(lobster_abundance)
```
This table is a frequency table. Tidy format data is in case format, which eliminates the need to weight other stats by the count of each variable in a frequency table. 

First, expand the amounts in the 'count' column using the uncount() function in tidyr
```{r}
lobster_tidy <- lobster_abundance %>%
  tidyr::uncount(lobster_count) 
```
Now each lobster (i.e., each observation) has its own row. Tidy!!



Let's look at this some different ways:
```{r}

View(lobster_tidy)

# Jitter plot of lobster size for each different site
ggplot(data = lobster_tidy, aes(x = site)) +
  geom_jitter()

ggplot(data = lobster_tidy, aes(x = size_mm)) +
  geom_histogram(aes(fill = site)) +
  facet_wrap(~site, scales = "free") # THIS IS IMPORTANT


# make a Q-Q plot to check normality of lobster size data
ggplot(data = lobster_tidy, aes(sample = size_mm)) +
  geom_qq() +
facet_wrap(~site, scales = "free") 


```
